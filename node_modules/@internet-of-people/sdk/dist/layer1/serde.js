"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const bytebuffer_1 = tslib_1.__importDefault(require("bytebuffer"));
exports.toBuffer = (data) => {
    const jsonSer = JSON.stringify(data);
    const jsonBytes = Buffer.from(jsonSer, 'utf8');
    const buffer = new bytebuffer_1.default(jsonBytes.length + 2, true);
    // TODO: serialize data using msgpack instead of just putting json in it
    buffer.writeVarint32(jsonBytes.length);
    buffer.append(jsonBytes, 'hex');
    return buffer;
};
exports.fromBuffer = (buffer) => {
    const length = buffer.readVarint32();
    const jsonSer = buffer.readString(length);
    const data = JSON.parse(jsonSer);
    return data;
};
//# sourceMappingURL=serde.js.map